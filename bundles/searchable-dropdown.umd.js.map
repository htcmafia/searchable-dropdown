{"version":3,"file":"searchable-dropdown.umd.js","sources":["../../../projects/searchable-dropdown/src/lib/searchable-dropdown.service.ts","../../../projects/searchable-dropdown/src/lib/searchable-dropdown.component.ts","../../../projects/searchable-dropdown/src/lib/searchable-dropdown.module.ts","../../../projects/searchable-dropdown/src/public-api.ts","../../../projects/searchable-dropdown/src/searchable-dropdown.ts"],"names":["Injectable","EventEmitter","Component","Output","Input","HostListener","NgModule","CommonModule","FormsModule"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SearchableDropdownService {\n\n  constructor() { }\n}\n","import { Component, EventEmitter, HostListener, Input, OnInit, Output } from '@angular/core';\n\n@Component({\n  selector: 'app-searchable-dropdown',\n  templateUrl: './searchable-dropdown.component.html',\n  styleUrls: ['./searchable-dropdown.component.scss']\n})\nexport class SearchableDropdownComponent implements OnInit {\n\n  @Output() onStart = new EventEmitter<SearchableDropdownComponent>();\n  @Output() onOpen = new EventEmitter<void>();\n\n  //Returns\n  @Input() key: number;\n  @Output() keyChange = new EventEmitter<number>();\n\n  @Input() value: string;\n  @Output() valueChange = new EventEmitter<string>();\n\n  //Placeholder\n  @Input() placeHolder: string = \"\";\n\n  //Calls on keyup\n  @Output() onSearch = new EventEmitter<string>();\n\n  @Input() defaultItem: { key, value };\n\n  itemsToShow: { key, value }[] = [];\n\n  //is item list visible\n  showItemList: boolean = false;\n  //is loading On/Off\n  isListLoading: boolean = false;\n\n  //Delay between the value entered in textfield and\n  //event emitter emittion.\n  private searchListTimeOut;\n\n  //Open/Close add new item screen\n  addNewItem: boolean = false;\n\n  private isItemSelected: boolean = false;\n  private isFocusInsideComponent = false;\n  private isComponentClicked = false;\n\n  constructor() { }\n\n  ngOnInit() {\n    if (this.defaultItem)\n      this.addItem(this.defaultItem.key, this.defaultItem.value);\n\n    this.onStart.emit(this);\n  }\n\n  //When item is selected from the list.\n  onItemClick(index: number) {\n    this.value = this.itemsToShow[index].value;\n    this.key = this.itemsToShow[index].key;\n    this.value = this.itemsToShow[index].value;\n    this.keyChange.emit(this.key);\n    this.valueChange.emit(this.value);\n    this.isItemSelected = true;\n  }\n\n  searchList() {\n    if (this.searchListTimeOut)\n      clearTimeout(this.searchListTimeOut);\n\n    this.searchListTimeOut = setTimeout(() => {\n      this.onSearch.emit(this.value);\n    }, 500);\n  }\n\n  //Manually add an item to the list.\n  addItem(key: number, value: string) {\n    this.itemsToShow.push({ key: key, value: value });\n    this.value = value;\n    this.key = key;\n    this.keyChange.emit(this.key);\n  }\n\n  //open/close add new item screne.\n  showAddNewItemSection(): void {\n    this.addNewItem = !this.addNewItem;\n  }\n\n  //if item list is in view hide it,\n  //if item list is hidden bring it in view.\n  @HostListener('click')\n  private clickInside(): void {\n\n    if (!this.showItemList) {\n      this.onOpen.emit(null);\n    }\n\n    this.showItemList = true;\n    this.isFocusInsideComponent = true;\n    this.isComponentClicked = true;\n    if (this.isItemSelected) {\n      this.isItemSelected = false;\n      //Force system to think the click was made outside.\n      this.isFocusInsideComponent = false;\n      this.clickout();\n    }\n  }\n\n  //Close when click outside the component\n  @HostListener('document:click')\n  private clickout(): void {\n    if (!this.isFocusInsideComponent && this.isComponentClicked) {\n\n      this.showItemList = false;\n      // do the heavy process\n      this.isComponentClicked = false;\n\n      let valueFound: boolean = false;\n      let currentItem: string;\n      this.itemsToShow.filter(item => {\n        if (this.value != null) {\n          currentItem = item.value;\n          if (currentItem.toString().toLowerCase() == this.value.toString().toLowerCase()) {\n            this.value = item.value;\n            this.key = item.key;\n            this.value = item.value;\n            this.keyChange.emit(this.key);\n            this.valueChange.emit(this.value);\n            valueFound = true;\n            return;\n          }\n        }\n      });\n      if (!valueFound) {\n        this.value = \"\";\n      }\n    }\n    this.isFocusInsideComponent = false;\n  }\n\n\n  //Close on Enter key\n  @HostListener('window:keyup.enter', ['$event'])\n  private handleKeyboardEvent(event: KeyboardEvent) {\n    this.showItemList = false;\n    // do the heavy process\n    this.isComponentClicked = false;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { SearchableDropdownComponent } from './searchable-dropdown.component';\n\n\n\n@NgModule({\n  declarations: [SearchableDropdownComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n  ],\n  exports: [\n    SearchableDropdownComponent,\n    CommonModule,\n    FormsModule,\n  ]\n})\nexport class SearchableDropdownModule { }\n","/*\n * Public API Surface of searchable-dropdown\n */\n\nexport * from './lib/searchable-dropdown.service';\nexport * from './lib/searchable-dropdown.component';\nexport * from './lib/searchable-dropdown.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}