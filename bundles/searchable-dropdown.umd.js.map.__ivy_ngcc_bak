{"version":3,"file":"searchable-dropdown.umd.js","sources":["../../../projects/searchable-dropdown/src/lib/searchable-dropdown.service.ts","../../../projects/searchable-dropdown/src/lib/searchable-dropdown.component.ts","../../../projects/searchable-dropdown/src/lib/searchable-dropdown.module.ts","../../../projects/searchable-dropdown/src/public-api.ts","../../../projects/searchable-dropdown/src/searchable-dropdown.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SearchableDropdownService {\n\n  constructor() { }\n}\n","import { Component, EventEmitter, HostListener, Input, OnInit, Output } from '@angular/core';\n\n@Component({\n  selector: 'app-searchable-dropdown',\n  templateUrl: './searchable-dropdown.component.html',\n  styleUrls: ['./searchable-dropdown.component.scss']\n})\nexport class SearchableDropdownComponent implements OnInit {\n\n  @Output() onStart = new EventEmitter<SearchableDropdownComponent>();\n  @Output() onOpen = new EventEmitter<void>();\n\n  //Returns\n  @Input() key: number;\n  @Output() keyChange = new EventEmitter<number>();\n\n  @Input() value: string;\n  @Output() valueChange = new EventEmitter<string>();\n\n  //Placeholder\n  @Input() placeHolder: string = \"\";\n\n  //Calls on keyup\n  @Output() onSearch = new EventEmitter<string>();\n\n  @Input() defaultItem: { key, value };\n\n  itemsToShow: { key, value }[] = [];\n\n  //is item list visible\n  showItemList: boolean = false;\n  //is loading On/Off\n  isListLoading: boolean = false;\n\n  //Delay between the value entered in textfield and\n  //event emitter emittion.\n  private searchListTimeOut;\n\n  //Open/Close add new item screen\n  addNewItem: boolean = false;\n\n  private isItemSelected: boolean = false;\n  private isFocusInsideComponent = false;\n  private isComponentClicked = false;\n\n  constructor() { }\n\n  ngOnInit() {\n    if (this.defaultItem)\n      this.addItem(this.defaultItem.key, this.defaultItem.value);\n\n    this.onStart.emit(this);\n  }\n\n  //When item is selected from the list.\n  onItemClick(index: number) {\n    this.value = this.itemsToShow[index].value;\n    this.key = this.itemsToShow[index].key;\n    this.value = this.itemsToShow[index].value;\n    this.keyChange.emit(this.key);\n    this.valueChange.emit(this.value);\n    this.isItemSelected = true;\n  }\n\n  searchList() {\n    if (this.searchListTimeOut)\n      clearTimeout(this.searchListTimeOut);\n\n    this.searchListTimeOut = setTimeout(() => {\n      this.onSearch.emit(this.value);\n    }, 500);\n  }\n\n  //Manually add an item to the list.\n  addItem(key: number, value: string) {\n    this.itemsToShow.push({ key: key, value: value });\n    this.value = value;\n    this.key = key;\n    this.keyChange.emit(this.key);\n  }\n\n  //open/close add new item screne.\n  showAddNewItemSection(): void {\n    this.addNewItem = !this.addNewItem;\n  }\n\n  //if item list is in view hide it,\n  //if item list is hidden bring it in view.\n  @HostListener('click')\n  private clickInside(): void {\n\n    if (!this.showItemList) {\n      this.onOpen.emit(null);\n    }\n\n    this.showItemList = true;\n    this.isFocusInsideComponent = true;\n    this.isComponentClicked = true;\n    if (this.isItemSelected) {\n      this.isItemSelected = false;\n      //Force system to think the click was made outside.\n      this.isFocusInsideComponent = false;\n      this.clickout();\n    }\n  }\n\n  //Close when click outside the component\n  @HostListener('document:click')\n  private clickout(): void {\n    if (!this.isFocusInsideComponent && this.isComponentClicked) {\n\n      this.showItemList = false;\n      // do the heavy process\n      this.isComponentClicked = false;\n\n      let valueFound: boolean = false;\n      let currentItem: string;\n      this.itemsToShow.filter(item => {\n        if (this.value != null) {\n          currentItem = item.value;\n          if (currentItem.toString().toLowerCase() == this.value.toString().toLowerCase()) {\n            this.value = item.value;\n            this.key = item.key;\n            this.value = item.value;\n            this.keyChange.emit(this.key);\n            this.valueChange.emit(this.value);\n            valueFound = true;\n            return;\n          }\n        }\n      });\n      if (!valueFound) {\n        this.value = \"\";\n      }\n    }\n    this.isFocusInsideComponent = false;\n  }\n\n\n  //Close on Enter key\n  @HostListener('window:keyup.enter', ['$event'])\n  private handleKeyboardEvent(event: KeyboardEvent) {\n    this.showItemList = false;\n    // do the heavy process\n    this.isComponentClicked = false;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { SearchableDropdownComponent } from './searchable-dropdown.component';\n\n\n\n@NgModule({\n  declarations: [SearchableDropdownComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n  ],\n  exports: [\n    SearchableDropdownComponent,\n    CommonModule,\n    FormsModule,\n  ]\n})\nexport class SearchableDropdownModule { }\n","/*\n * Public API Surface of searchable-dropdown\n */\n\nexport * from './lib/searchable-dropdown.service';\nexport * from './lib/searchable-dropdown.component';\nexport * from './lib/searchable-dropdown.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["Injectable","EventEmitter","Component","Output","Input","HostListener","NgModule","CommonModule","FormsModule"],"mappings":"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"}