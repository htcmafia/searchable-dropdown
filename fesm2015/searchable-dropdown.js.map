{"version":3,"file":"searchable-dropdown.js","sources":["../../../projects/searchable-dropdown/src/lib/searchable-dropdown.service.ts","../../../projects/searchable-dropdown/src/lib/searchable-dropdown.component.ts","../../../projects/searchable-dropdown/src/lib/searchable-dropdown.module.ts","../../../projects/searchable-dropdown/src/public-api.ts","../../../projects/searchable-dropdown/src/searchable-dropdown.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SearchableDropdownService {\n\n  constructor() { }\n}\n","import { Component, EventEmitter, HostListener, Input, OnInit, Output } from '@angular/core';\n\n@Component({\n  selector: 'app-searchable-dropdown',\n  templateUrl: './searchable-dropdown.component.html',\n  styleUrls: ['./searchable-dropdown.component.scss']\n})\nexport class SearchableDropdownComponent implements OnInit {\n\n  @Output() onStart = new EventEmitter<SearchableDropdownComponent>();\n  @Output() onOpen = new EventEmitter<void>();\n\n  //Returns\n  @Input() key: number;\n  @Output() keyChange = new EventEmitter<number>();\n\n  @Input() value: string;\n  @Output() valueChange = new EventEmitter<string>();\n\n  //Placeholder\n  @Input() placeHolder: string = \"\";\n\n  //Calls on keyup\n  @Output() onSearch = new EventEmitter<string>();\n\n  @Input() defaultItem: { key, value };\n\n  itemsToShow: { key, value }[] = [];\n\n  //is item list visible\n  showItemList: boolean = false;\n  //is loading On/Off\n  isListLoading: boolean = false;\n\n  //Delay between the value entered in textfield and\n  //event emitter emittion.\n  private searchListTimeOut;\n\n  //Open/Close add new item screen\n  addNewItem: boolean = false;\n\n  private isItemSelected: boolean = false;\n  private isFocusInsideComponent = false;\n  private isComponentClicked = false;\n\n  constructor() { }\n\n  ngOnInit() {\n    if (this.defaultItem)\n      this.addItem(this.defaultItem.key, this.defaultItem.value);\n\n    this.onStart.emit(this);\n  }\n\n  //When item is selected from the list.\n  onItemClick(index: number) {\n    this.value = this.itemsToShow[index].value;\n    this.key = this.itemsToShow[index].key;\n    this.value = this.itemsToShow[index].value;\n    this.keyChange.emit(this.key);\n    this.valueChange.emit(this.value);\n    this.isItemSelected = true;\n  }\n\n  searchList() {\n    if (this.searchListTimeOut)\n      clearTimeout(this.searchListTimeOut);\n\n    this.searchListTimeOut = setTimeout(() => {\n      this.onSearch.emit(this.value);\n    }, 500);\n  }\n\n  //Manually add an item to the list.\n  addItem(key: number, value: string) {\n    this.itemsToShow.push({ key: key, value: value });\n    this.value = value;\n    this.key = key;\n    this.keyChange.emit(this.key);\n  }\n\n  //open/close add new item screne.\n  showAddNewItemSection(): void {\n    this.addNewItem = !this.addNewItem;\n  }\n\n  //if item list is in view hide it,\n  //if item list is hidden bring it in view.\n  @HostListener('click')\n  private clickInside(): void {\n\n    if (!this.showItemList) {\n      this.onOpen.emit(null);\n    }\n\n    this.showItemList = true;\n    this.isFocusInsideComponent = true;\n    this.isComponentClicked = true;\n    if (this.isItemSelected) {\n      this.isItemSelected = false;\n      //Force system to think the click was made outside.\n      this.isFocusInsideComponent = false;\n      this.clickout();\n    }\n  }\n\n  //Close when click outside the component\n  @HostListener('document:click')\n  private clickout(): void {\n    if (!this.isFocusInsideComponent && this.isComponentClicked) {\n\n      this.showItemList = false;\n      // do the heavy process\n      this.isComponentClicked = false;\n\n      let valueFound: boolean = false;\n      let currentItem: string;\n      this.itemsToShow.filter(item => {\n        if (this.value != null) {\n          currentItem = item.value;\n          if (currentItem.toString().toLowerCase() == this.value.toString().toLowerCase()) {\n            this.value = item.value;\n            this.key = item.key;\n            this.value = item.value;\n            this.keyChange.emit(this.key);\n            this.valueChange.emit(this.value);\n            valueFound = true;\n            return;\n          }\n        }\n      });\n      if (!valueFound) {\n        this.value = \"\";\n      }\n    }\n    this.isFocusInsideComponent = false;\n  }\n\n\n  //Close on Enter key\n  @HostListener('window:keyup.enter', ['$event'])\n  private handleKeyboardEvent(event: KeyboardEvent) {\n    this.showItemList = false;\n    // do the heavy process\n    this.isComponentClicked = false;\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { SearchableDropdownComponent } from './searchable-dropdown.component';\n\n\n\n@NgModule({\n  declarations: [SearchableDropdownComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n  ],\n  exports: [\n    SearchableDropdownComponent,\n    CommonModule,\n    FormsModule,\n  ]\n})\nexport class SearchableDropdownModule { }\n","/*\n * Public API Surface of searchable-dropdown\n */\n\nexport * from './lib/searchable-dropdown.service';\nexport * from './lib/searchable-dropdown.component';\nexport * from './lib/searchable-dropdown.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]}